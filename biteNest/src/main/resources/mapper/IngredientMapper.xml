<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bn.biteNest.recipe.model.dao.IngredientMapper">

    <select id="selectByName" parameterType="string" resultType="com.bn.biteNest.recipe.model.vo.IngredientVO">
        SELECT 
        		INGREDIENT_CD,
        		INGREDIENT_NM 
     	  FROM 
     	  		INGREDIENT_TB 
     	 WHERE
     	 		INGREDIENT_NM = #{ingredientName}
    </select>

    <insert id="insertIngredient" parameterType="com.bn.biteNest.recipe.model.vo.IngredientVO" useGeneratedKeys="true" keyProperty="ingredientCD">
        <selectKey keyProperty="ingredientCD" order="BEFORE" resultType="int">
            SELECT 
            		INGREDIENT_SEQ.NEXTVAL 
              FROM 
              		DUAL
        </selectKey>
        INSERT 
          INTO 
          		INGREDIENT_TB 
          		(
          		 INGREDIENT_CD,
          		 INGREDIENT_NM
          		 )
         VALUES 
         		(
         		 #{ingredientCD},
         		 #{ingredientNM}
         		 )
    </insert> 
</mapper>
