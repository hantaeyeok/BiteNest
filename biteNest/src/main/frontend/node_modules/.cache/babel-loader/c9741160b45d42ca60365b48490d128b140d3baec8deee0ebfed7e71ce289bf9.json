{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Emitter = void 0;\nconst MemoryLeakError_1 = require(\"./MemoryLeakError\");\n/**\n * Node.js-compatible implementation of `EventEmitter`.\n *\n * @example\n * const emitter = new Emitter<{ hello: [string] }>()\n * emitter.on('hello', (name) => console.log(name))\n * emitter.emit('hello', 'John')\n */\nclass Emitter {\n  constructor() {\n    this.events = new Map();\n    this.maxListeners = Emitter.defaultMaxListeners;\n    this.hasWarnedAboutPotentialMemoryLeak = false;\n  }\n  static listenerCount(emitter, eventName) {\n    return emitter.listenerCount(eventName);\n  }\n  _emitInternalEvent(internalEventName, eventName, listener) {\n    this.emit(internalEventName,\n    // Anything to make TypeScript happy.\n    ...[eventName, listener]);\n  }\n  _getListeners(eventName) {\n    return this.events.get(eventName) || [];\n  }\n  _removeListener(listeners, listener) {\n    const index = listeners.indexOf(listener);\n    if (index > -1) {\n      listeners.splice(index, 1);\n    }\n    return [];\n  }\n  _wrapOnceListener(eventName, listener) {\n    const onceListener = (...data) => {\n      this.removeListener(eventName, onceListener);\n      listener.apply(this, data);\n    };\n    return onceListener;\n  }\n  setMaxListeners(maxListeners) {\n    this.maxListeners = maxListeners;\n    return this;\n  }\n  /**\n   * Returns the current max listener value for the `Emitter` which is\n   * either set by `emitter.setMaxListeners(n)` or defaults to\n   * `Emitter.defaultMaxListeners`.\n   */\n  getMaxListeners() {\n    return this.maxListeners;\n  }\n  /**\n   * Returns an array listing the events for which the emitter has registered listeners.\n   * The values in the array will be strings or Symbols.\n   */\n  eventNames() {\n    return Array.from(this.events.keys());\n  }\n  /**\n   * Synchronously calls each of the listeners registered for the event named `eventName`,\n   * in the order they were registered, passing the supplied arguments to each.\n   * Returns `true` if the event has listeners, `false` otherwise.\n   *\n   * @example\n   * const emitter = new Emitter<{ hello: [string] }>()\n   * emitter.emit('hello', 'John')\n   */\n  emit(eventName, ...data) {\n    const listeners = this._getListeners(eventName);\n    listeners.forEach(listener => {\n      listener.apply(this, data);\n    });\n    return listeners.length > 0;\n  }\n  addListener(eventName, listener) {\n    // Emit the `newListener` event before adding the listener.\n    this._emitInternalEvent('newListener', eventName, listener);\n    const nextListeners = this._getListeners(eventName).concat(listener);\n    this.events.set(eventName, nextListeners);\n    if (this.maxListeners > 0 && this.listenerCount(eventName) > this.maxListeners && !this.hasWarnedAboutPotentialMemoryLeak) {\n      this.hasWarnedAboutPotentialMemoryLeak = true;\n      const memoryLeakWarning = new MemoryLeakError_1.MemoryLeakError(this, eventName, this.listenerCount(eventName));\n      console.warn(memoryLeakWarning);\n    }\n    return this;\n  }\n  on(eventName, listener) {\n    return this.addListener(eventName, listener);\n  }\n  once(eventName, listener) {\n    return this.addListener(eventName, this._wrapOnceListener(eventName, listener));\n  }\n  prependListener(eventName, listener) {\n    const listeners = this._getListeners(eventName);\n    if (listeners.length > 0) {\n      const nextListeners = [listener].concat(listeners);\n      this.events.set(eventName, nextListeners);\n    } else {\n      this.events.set(eventName, listeners.concat(listener));\n    }\n    return this;\n  }\n  prependOnceListener(eventName, listener) {\n    return this.prependListener(eventName, this._wrapOnceListener(eventName, listener));\n  }\n  removeListener(eventName, listener) {\n    const listeners = this._getListeners(eventName);\n    if (listeners.length > 0) {\n      this._removeListener(listeners, listener);\n      this.events.set(eventName, listeners);\n      // Emit the `removeListener` event after removing the listener.\n      this._emitInternalEvent('removeListener', eventName, listener);\n    }\n    return this;\n  }\n  /**\n   * Alias for `emitter.removeListener()`.\n   *\n   * @example\n   * emitter.off('hello', listener)\n   */\n  off(eventName, listener) {\n    return this.removeListener(eventName, listener);\n  }\n  removeAllListeners(eventName) {\n    if (eventName) {\n      this.events.delete(eventName);\n    } else {\n      this.events.clear();\n    }\n    return this;\n  }\n  /**\n   * Returns a copy of the array of listeners for the event named `eventName`.\n   */\n  listeners(eventName) {\n    return Array.from(this._getListeners(eventName));\n  }\n  /**\n   * Returns the number of listeners listening to the event named `eventName`.\n   */\n  listenerCount(eventName) {\n    return this._getListeners(eventName).length;\n  }\n  rawListeners(eventName) {\n    return this.listeners(eventName);\n  }\n}\nexports.Emitter = Emitter;\nEmitter.defaultMaxListeners = 10;","map":{"version":3,"names":["Object","defineProperty","exports","value","Emitter","MemoryLeakError_1","require","constructor","events","Map","maxListeners","defaultMaxListeners","hasWarnedAboutPotentialMemoryLeak","listenerCount","emitter","eventName","_emitInternalEvent","internalEventName","listener","emit","_getListeners","get","_removeListener","listeners","index","indexOf","splice","_wrapOnceListener","onceListener","data","removeListener","apply","setMaxListeners","getMaxListeners","eventNames","Array","from","keys","forEach","length","addListener","nextListeners","concat","set","memoryLeakWarning","MemoryLeakError","console","warn","on","once","prependListener","prependOnceListener","off","removeAllListeners","delete","clear","rawListeners"],"sources":["/Users/leeyangie/.yarn/berry/cache/strict-event-emitter-npm-0.4.6-b845d23c7d-10c0.zip/node_modules/strict-event-emitter/lib/Emitter.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emitter = void 0;\nconst MemoryLeakError_1 = require(\"./MemoryLeakError\");\n/**\n * Node.js-compatible implementation of `EventEmitter`.\n *\n * @example\n * const emitter = new Emitter<{ hello: [string] }>()\n * emitter.on('hello', (name) => console.log(name))\n * emitter.emit('hello', 'John')\n */\nclass Emitter {\n    constructor() {\n        this.events = new Map();\n        this.maxListeners = Emitter.defaultMaxListeners;\n        this.hasWarnedAboutPotentialMemoryLeak = false;\n    }\n    static listenerCount(emitter, eventName) {\n        return emitter.listenerCount(eventName);\n    }\n    _emitInternalEvent(internalEventName, eventName, listener) {\n        this.emit(internalEventName, \n        // Anything to make TypeScript happy.\n        ...[eventName, listener]);\n    }\n    _getListeners(eventName) {\n        return this.events.get(eventName) || [];\n    }\n    _removeListener(listeners, listener) {\n        const index = listeners.indexOf(listener);\n        if (index > -1) {\n            listeners.splice(index, 1);\n        }\n        return [];\n    }\n    _wrapOnceListener(eventName, listener) {\n        const onceListener = (...data) => {\n            this.removeListener(eventName, onceListener);\n            listener.apply(this, data);\n        };\n        return onceListener;\n    }\n    setMaxListeners(maxListeners) {\n        this.maxListeners = maxListeners;\n        return this;\n    }\n    /**\n     * Returns the current max listener value for the `Emitter` which is\n     * either set by `emitter.setMaxListeners(n)` or defaults to\n     * `Emitter.defaultMaxListeners`.\n     */\n    getMaxListeners() {\n        return this.maxListeners;\n    }\n    /**\n     * Returns an array listing the events for which the emitter has registered listeners.\n     * The values in the array will be strings or Symbols.\n     */\n    eventNames() {\n        return Array.from(this.events.keys());\n    }\n    /**\n     * Synchronously calls each of the listeners registered for the event named `eventName`,\n     * in the order they were registered, passing the supplied arguments to each.\n     * Returns `true` if the event has listeners, `false` otherwise.\n     *\n     * @example\n     * const emitter = new Emitter<{ hello: [string] }>()\n     * emitter.emit('hello', 'John')\n     */\n    emit(eventName, ...data) {\n        const listeners = this._getListeners(eventName);\n        listeners.forEach((listener) => {\n            listener.apply(this, data);\n        });\n        return listeners.length > 0;\n    }\n    addListener(eventName, listener) {\n        // Emit the `newListener` event before adding the listener.\n        this._emitInternalEvent('newListener', eventName, listener);\n        const nextListeners = this._getListeners(eventName).concat(listener);\n        this.events.set(eventName, nextListeners);\n        if (this.maxListeners > 0 &&\n            this.listenerCount(eventName) > this.maxListeners &&\n            !this.hasWarnedAboutPotentialMemoryLeak) {\n            this.hasWarnedAboutPotentialMemoryLeak = true;\n            const memoryLeakWarning = new MemoryLeakError_1.MemoryLeakError(this, eventName, this.listenerCount(eventName));\n            console.warn(memoryLeakWarning);\n        }\n        return this;\n    }\n    on(eventName, listener) {\n        return this.addListener(eventName, listener);\n    }\n    once(eventName, listener) {\n        return this.addListener(eventName, this._wrapOnceListener(eventName, listener));\n    }\n    prependListener(eventName, listener) {\n        const listeners = this._getListeners(eventName);\n        if (listeners.length > 0) {\n            const nextListeners = [listener].concat(listeners);\n            this.events.set(eventName, nextListeners);\n        }\n        else {\n            this.events.set(eventName, listeners.concat(listener));\n        }\n        return this;\n    }\n    prependOnceListener(eventName, listener) {\n        return this.prependListener(eventName, this._wrapOnceListener(eventName, listener));\n    }\n    removeListener(eventName, listener) {\n        const listeners = this._getListeners(eventName);\n        if (listeners.length > 0) {\n            this._removeListener(listeners, listener);\n            this.events.set(eventName, listeners);\n            // Emit the `removeListener` event after removing the listener.\n            this._emitInternalEvent('removeListener', eventName, listener);\n        }\n        return this;\n    }\n    /**\n     * Alias for `emitter.removeListener()`.\n     *\n     * @example\n     * emitter.off('hello', listener)\n     */\n    off(eventName, listener) {\n        return this.removeListener(eventName, listener);\n    }\n    removeAllListeners(eventName) {\n        if (eventName) {\n            this.events.delete(eventName);\n        }\n        else {\n            this.events.clear();\n        }\n        return this;\n    }\n    /**\n     * Returns a copy of the array of listeners for the event named `eventName`.\n     */\n    listeners(eventName) {\n        return Array.from(this._getListeners(eventName));\n    }\n    /**\n     * Returns the number of listeners listening to the event named `eventName`.\n     */\n    listenerCount(eventName) {\n        return this._getListeners(eventName).length;\n    }\n    rawListeners(eventName) {\n        return this.listeners(eventName);\n    }\n}\nexports.Emitter = Emitter;\nEmitter.defaultMaxListeners = 10;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,OAAO,GAAG,KAAK,CAAC;AACxB,MAAMC,iBAAiB,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMF,OAAO,CAAC;EACVG,WAAWA,CAAA,EAAG;IACV,IAAI,CAACC,MAAM,GAAG,IAAIC,GAAG,CAAC,CAAC;IACvB,IAAI,CAACC,YAAY,GAAGN,OAAO,CAACO,mBAAmB;IAC/C,IAAI,CAACC,iCAAiC,GAAG,KAAK;EAClD;EACA,OAAOC,aAAaA,CAACC,OAAO,EAAEC,SAAS,EAAE;IACrC,OAAOD,OAAO,CAACD,aAAa,CAACE,SAAS,CAAC;EAC3C;EACAC,kBAAkBA,CAACC,iBAAiB,EAAEF,SAAS,EAAEG,QAAQ,EAAE;IACvD,IAAI,CAACC,IAAI,CAACF,iBAAiB;IAC3B;IACA,GAAG,CAACF,SAAS,EAAEG,QAAQ,CAAC,CAAC;EAC7B;EACAE,aAAaA,CAACL,SAAS,EAAE;IACrB,OAAO,IAAI,CAACP,MAAM,CAACa,GAAG,CAACN,SAAS,CAAC,IAAI,EAAE;EAC3C;EACAO,eAAeA,CAACC,SAAS,EAAEL,QAAQ,EAAE;IACjC,MAAMM,KAAK,GAAGD,SAAS,CAACE,OAAO,CAACP,QAAQ,CAAC;IACzC,IAAIM,KAAK,GAAG,CAAC,CAAC,EAAE;MACZD,SAAS,CAACG,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;IAC9B;IACA,OAAO,EAAE;EACb;EACAG,iBAAiBA,CAACZ,SAAS,EAAEG,QAAQ,EAAE;IACnC,MAAMU,YAAY,GAAGA,CAAC,GAAGC,IAAI,KAAK;MAC9B,IAAI,CAACC,cAAc,CAACf,SAAS,EAAEa,YAAY,CAAC;MAC5CV,QAAQ,CAACa,KAAK,CAAC,IAAI,EAAEF,IAAI,CAAC;IAC9B,CAAC;IACD,OAAOD,YAAY;EACvB;EACAI,eAAeA,CAACtB,YAAY,EAAE;IAC1B,IAAI,CAACA,YAAY,GAAGA,YAAY;IAChC,OAAO,IAAI;EACf;EACA;AACJ;AACA;AACA;AACA;EACIuB,eAAeA,CAAA,EAAG;IACd,OAAO,IAAI,CAACvB,YAAY;EAC5B;EACA;AACJ;AACA;AACA;EACIwB,UAAUA,CAAA,EAAG;IACT,OAAOC,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC5B,MAAM,CAAC6B,IAAI,CAAC,CAAC,CAAC;EACzC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIlB,IAAIA,CAACJ,SAAS,EAAE,GAAGc,IAAI,EAAE;IACrB,MAAMN,SAAS,GAAG,IAAI,CAACH,aAAa,CAACL,SAAS,CAAC;IAC/CQ,SAAS,CAACe,OAAO,CAAEpB,QAAQ,IAAK;MAC5BA,QAAQ,CAACa,KAAK,CAAC,IAAI,EAAEF,IAAI,CAAC;IAC9B,CAAC,CAAC;IACF,OAAON,SAAS,CAACgB,MAAM,GAAG,CAAC;EAC/B;EACAC,WAAWA,CAACzB,SAAS,EAAEG,QAAQ,EAAE;IAC7B;IACA,IAAI,CAACF,kBAAkB,CAAC,aAAa,EAAED,SAAS,EAAEG,QAAQ,CAAC;IAC3D,MAAMuB,aAAa,GAAG,IAAI,CAACrB,aAAa,CAACL,SAAS,CAAC,CAAC2B,MAAM,CAACxB,QAAQ,CAAC;IACpE,IAAI,CAACV,MAAM,CAACmC,GAAG,CAAC5B,SAAS,EAAE0B,aAAa,CAAC;IACzC,IAAI,IAAI,CAAC/B,YAAY,GAAG,CAAC,IACrB,IAAI,CAACG,aAAa,CAACE,SAAS,CAAC,GAAG,IAAI,CAACL,YAAY,IACjD,CAAC,IAAI,CAACE,iCAAiC,EAAE;MACzC,IAAI,CAACA,iCAAiC,GAAG,IAAI;MAC7C,MAAMgC,iBAAiB,GAAG,IAAIvC,iBAAiB,CAACwC,eAAe,CAAC,IAAI,EAAE9B,SAAS,EAAE,IAAI,CAACF,aAAa,CAACE,SAAS,CAAC,CAAC;MAC/G+B,OAAO,CAACC,IAAI,CAACH,iBAAiB,CAAC;IACnC;IACA,OAAO,IAAI;EACf;EACAI,EAAEA,CAACjC,SAAS,EAAEG,QAAQ,EAAE;IACpB,OAAO,IAAI,CAACsB,WAAW,CAACzB,SAAS,EAAEG,QAAQ,CAAC;EAChD;EACA+B,IAAIA,CAAClC,SAAS,EAAEG,QAAQ,EAAE;IACtB,OAAO,IAAI,CAACsB,WAAW,CAACzB,SAAS,EAAE,IAAI,CAACY,iBAAiB,CAACZ,SAAS,EAAEG,QAAQ,CAAC,CAAC;EACnF;EACAgC,eAAeA,CAACnC,SAAS,EAAEG,QAAQ,EAAE;IACjC,MAAMK,SAAS,GAAG,IAAI,CAACH,aAAa,CAACL,SAAS,CAAC;IAC/C,IAAIQ,SAAS,CAACgB,MAAM,GAAG,CAAC,EAAE;MACtB,MAAME,aAAa,GAAG,CAACvB,QAAQ,CAAC,CAACwB,MAAM,CAACnB,SAAS,CAAC;MAClD,IAAI,CAACf,MAAM,CAACmC,GAAG,CAAC5B,SAAS,EAAE0B,aAAa,CAAC;IAC7C,CAAC,MACI;MACD,IAAI,CAACjC,MAAM,CAACmC,GAAG,CAAC5B,SAAS,EAAEQ,SAAS,CAACmB,MAAM,CAACxB,QAAQ,CAAC,CAAC;IAC1D;IACA,OAAO,IAAI;EACf;EACAiC,mBAAmBA,CAACpC,SAAS,EAAEG,QAAQ,EAAE;IACrC,OAAO,IAAI,CAACgC,eAAe,CAACnC,SAAS,EAAE,IAAI,CAACY,iBAAiB,CAACZ,SAAS,EAAEG,QAAQ,CAAC,CAAC;EACvF;EACAY,cAAcA,CAACf,SAAS,EAAEG,QAAQ,EAAE;IAChC,MAAMK,SAAS,GAAG,IAAI,CAACH,aAAa,CAACL,SAAS,CAAC;IAC/C,IAAIQ,SAAS,CAACgB,MAAM,GAAG,CAAC,EAAE;MACtB,IAAI,CAACjB,eAAe,CAACC,SAAS,EAAEL,QAAQ,CAAC;MACzC,IAAI,CAACV,MAAM,CAACmC,GAAG,CAAC5B,SAAS,EAAEQ,SAAS,CAAC;MACrC;MACA,IAAI,CAACP,kBAAkB,CAAC,gBAAgB,EAAED,SAAS,EAAEG,QAAQ,CAAC;IAClE;IACA,OAAO,IAAI;EACf;EACA;AACJ;AACA;AACA;AACA;AACA;EACIkC,GAAGA,CAACrC,SAAS,EAAEG,QAAQ,EAAE;IACrB,OAAO,IAAI,CAACY,cAAc,CAACf,SAAS,EAAEG,QAAQ,CAAC;EACnD;EACAmC,kBAAkBA,CAACtC,SAAS,EAAE;IAC1B,IAAIA,SAAS,EAAE;MACX,IAAI,CAACP,MAAM,CAAC8C,MAAM,CAACvC,SAAS,CAAC;IACjC,CAAC,MACI;MACD,IAAI,CAACP,MAAM,CAAC+C,KAAK,CAAC,CAAC;IACvB;IACA,OAAO,IAAI;EACf;EACA;AACJ;AACA;EACIhC,SAASA,CAACR,SAAS,EAAE;IACjB,OAAOoB,KAAK,CAACC,IAAI,CAAC,IAAI,CAAChB,aAAa,CAACL,SAAS,CAAC,CAAC;EACpD;EACA;AACJ;AACA;EACIF,aAAaA,CAACE,SAAS,EAAE;IACrB,OAAO,IAAI,CAACK,aAAa,CAACL,SAAS,CAAC,CAACwB,MAAM;EAC/C;EACAiB,YAAYA,CAACzC,SAAS,EAAE;IACpB,OAAO,IAAI,CAACQ,SAAS,CAACR,SAAS,CAAC;EACpC;AACJ;AACAb,OAAO,CAACE,OAAO,GAAGA,OAAO;AACzBA,OAAO,CAACO,mBAAmB,GAAG,EAAE","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}